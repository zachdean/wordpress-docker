var wposesModal=function(t){var l={prefix:"wposes",loading:!1,dismissible:!0},p={};function r(e){return e.replace(/[^a-z]/g,"")}return l.exists=function(e){var o=r(e);return void 0!==p[o]||!!t(e).length},l.open=function(e,o,s){var a=r(e);t("body").append('<div id="wposes-overlay"></div>');var d=t("#wposes-overlay");l.dismissible?d.append('<div id="wposes-modal"><span class="close-wposes-modal">Ã—</span></div>'):d.append('<div id="wposes-modal"></div>');var i=t("#wposes-modal");if(void 0===p[a]){var n=t(e);p[a]=n.clone(!0).css("display","block"),n.remove()}i.data("wposes-modal-target",e).append(p[a]),void 0!==s&&i.addClass(s),"function"==typeof o&&o(e),t("body").addClass("wposes-modal-open"),i.css("display","table"),d.fadeIn(150),i.fadeIn(150),t("body").trigger("wposes-modal-open",[e])},l.close=function(e){if(!l.loading&&l.dismissible){var o=t("#wposes-modal").data("wposes-modal-target");t("#wposes-overlay").fadeOut(150,function(){t("body").removeClass("wposes-modal-open"),t(this).remove(),"function"==typeof e&&e(o)}),t("body").trigger("wposes-modal-close",[o])}},l.setLoadingState=function(e){l.loading=e},l.setDismissibleState=function(e){l.dismissible=e},t(document).ready(function(){t("body").on("click","[data-wposes-modal]",function(e){e.preventDefault(),l.open(t(this).data("wposes-modal")+"."+l.prefix)}),t("body").on("click",".wposes-modal-cancel, .close-wposes-modal, #wposes-overlay",function(e){if(e.target!==this)return!0;e.preventDefault(),l.close()})}),t(document).keyup(function(e){"Escape"===e.key&&l.close()}),l}(jQuery);